webpackJsonp([0],{0:function(e,t,n){e.exports=n(1)},1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2),u=r(a),i=n(3),l=r(i),c=n(34),s=r(c),f=n(35),d=r(f);n.p=window.__PUBLIC_PATH__+"/";var p=window.__APP_SETTINGS__||{},h=function(e){return e["default"]||e},v=function(e){return"function"==typeof e?new Promise(e).then(h):h(e)},m=function(){window.console&&console.time&&void 0},y=function(){setTimeout((function(){window.console&&console.timeEnd&&void 0}),0)},_={render:function(e,t){m(),u["default"].render(e,t),y()}},w=s["default"].getFlatList(Array.isArray(d["default"])?d["default"]:Object.values(d["default"])),g=o({hashType:"hashbang",container:"#root"},p,{context:o({preload:{}},p.context,{isClient:!0,isServer:!1}),loader:v,routes:w,viewEngine:_}),b={};Array.from(document.querySelectorAll("[data-preload]")).forEach((function(e){var t=e.getAttribute("data-preload"),n=e.textContent||e.innerHTML;b[t]=n})),g.context.preload=b;var E=(0,l["default"])(g);E.start()},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=[{path:"/(index|home|list)?",controller:n(36)},{path:"/topic/:topicId",controller:n(75)},{path:"/login",controller:n(85)},{path:"/user/:loginname",controller:n(87)},{path:"/add",controller:n(91)},{path:"/message",controller:n(95)},{path:"/about",controller:n(99)},{path:"*",controller:n(101)}]},36:function(e,t,n){e.exports=function(e){n.e(1,(function(t){e(n(37))}))}},38:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),i=u.value}catch(l){return void n(l)}return u.done?void e(i):Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}))}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),d=function E(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:E(o,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},p=n(39),h=o(p),v=n(45),m=o(v),y=n(53),_=o(y),w=n(54),g=r(w),b=(function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.preload={main:"/css/main.css"},r.NeedLogin=!1,r.hideAlert=function(){var e=r.store.actions.UPDATE_ALERT_TEXT;e("")},r.showAlert=function(e){var t=r.store.actions.UPDATE_ALERT_TEXT;t(e),setTimeout(r.hideAlert,1e3)},r.showLoading=function(e){var t=r.store.actions.UPDATE_LOADING_TEXT;t(e)},r.hideLoading=function(){var e=r.store.actions.UPDATE_LOADING_TEXT;e("")},r.handleOpenMenu=function(){var e=r.store.actions.OPEN_MENU;e()},r.handleCloseMenu=function(){var e=r.store.actions.CLOSE_MENU;e()},r.handleLogout=function(){r.removeCookie("accesstoken"),window.location.reload()},o=n,l(r,o)}return c(t,e),f(t,[{key:"getInitialState",value:(function(){function e(e){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(e){var t,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getUserInfo();case 2:return t=n.sent,r=this.isLogin(),o=r,n.abrupt("return",s({},_["default"],{showAddButton:o,userInfo:t,isLogin:r},e));case 6:case"end":return n.stop()}}),n,this)})));return e})()},{key:"getFinalActions",value:function(e){return s({},e,g)}},{key:"stateDidReuse",value:function(e){e.userInfo&&(this.context.userInfo=e.userInfo)}},{key:"shouldComponentCreate",value:(function(){function e(){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.NeedLogin||this.isLogin()){e.next=3;break}return this.redirect("/login?redirect="+this.location.raw),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),n,this)})));return e})()},{key:"pageWillLeave",value:function(){this.showLoading("加载中……")}},{key:"pageDidBack",value:function(){this.hideLoading()}},{key:"getUserInfo",value:(function(){function e(){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(){var e,t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=this.context,t=null,n.prev=2,!e.hasOwnProperty("userInfo")){n.next=7;break}t=e.userInfo,n.next=12;break;case 7:return r=this.cookie("accesstoken"),n.next=10,this.fetchUserInfo(r);case 10:t=n.sent,e.userInfo=t;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](2),e.userInfo=null;case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}}),n,this,[[2,14]])})));return e})()},{key:"fetchUserInfo",value:(function(){function e(e){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(e){var t,r,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,this.post("/accesstoken",{accesstoken:e});case 4:return t=n.sent,r=t.success,o=t.error_msg,u=a(t,["success","error_msg"]),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n,this)})));return e})()},{key:"isLogin",value:function(){return!!this.context.userInfo}},{key:"get",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=s({},r,{credentials:"omit",headers:s({},r.headers,{"Content-Type":"application/x-www-form-urlencoded"})}),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this,e,n,r)}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=s({},n,{credentials:"omit",method:"POST",headers:s({},n.headers,{"Content-Type":"application/x-www-form-urlencoded"}),body:m["default"].stringify(t)}),this.fetch(e,n)}},{key:"fetch",value:(function(){function e(e,t){return n.apply(this,arguments)}var n=u(regeneratorRuntime.mark((function r(e,n){var o,u,i,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e,n);case 2:if(o=r.sent,u=o.success,i=o.error_msg,l=a(o,["success","error_msg"]),u){r.next=6;break}throw new Error(i);case 6:return r.abrupt("return",o);case 7:case"end":return r.stop()}}),r,this)})));return e})()}]),t})(h["default"]);t["default"]=b},53:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={html:{title:"isomorphic-cnode",description:"an example of react-imvc usage",keywords:"react ssr isomorphic mvc"},pageTitle:"",userInfo:null,showMenu:!1,fixedHeader:!0,showAddButton:!1,messageCount:0,alertText:"",loadingText:""}},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.UPDATE_HTML_TITLE=function(e,t){var r=n({},e.html,{title:t});return n({},e,{html:r})},t.OPEN_MENU=function(e){return e.showMenu?e:n({},e,{showMenu:!0})},t.CLOSE_MENU=function(e){return e.showMenu?n({},e,{showMenu:!1}):e},t.UPDATE_ALERT_TEXT=function(e,t){return n({},e,{alertText:t})},t.UPDATE_LOADING_TEXT=function(e,t){return n({},e,{loadingText:t})}},66:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.children;return u["default"].createElement("div",{style:{height:"100%",background:"#fff"}},u["default"].createElement(i.Style,{name:"main"}),u["default"].createElement(c["default"],null),t,u["default"].createElement(f["default"],null),u["default"].createElement(p["default"],null),u["default"].createElement(v["default"],null))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(2),u=r(a),i=n(58),l=n(67),c=r(l),s=n(72),f=r(s),d=n(73),p=r(d),h=n(74),v=r(h)},67:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.showMenu,n=e.fixedHeader,r=e.showAddButton,o=e.messageCount,l=e.pageTitle,s=e.onCloseMenu,d=e.onOpenMenu,p=(0,f["default"])({show:t&&n,"fix-header":n,"no-fix":!n});return c["default"].createElement("div",null,c["default"].createElement(a,{"if":t&&n,onClick:s}),c["default"].createElement("header",{id:"hd",className:p},c["default"].createElement("div",{className:"nv-toolbar"},c["default"].createElement(u,{"if":n,onClick:d}),c["default"].createElement("span",null,l),c["default"].createElement(i,{messageCount:o,showAddButton:r}))),c["default"].createElement(m["default"],null))}function a(e){return e["if"]?c["default"].createElement("div",{className:"page-cover",onClick:e.onClick}):null}function u(e){return e["if"]?c["default"].createElement("div",{className:"toolbar-nav",onClick:e.onClick}):null}function i(e){var t=e.messageCount,n=e.showAddButton;return t>0?c["default"].createElement("i",{className:"num"},t):n?c["default"].createElement(d.Link,{as:"i",className:"iconfont add-icon",to:"/add"},""):null}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=r(l),s=n(68),f=r(s),d=n(58),p=n(69),h=r(p),v=n(70),m=r(v),y=(0,h["default"])((function(e){var t=e.state,n=e.handlers;return{fixedHeader:t.fixedHeader,showMenu:t.showMenu,pageTitle:t.pageTitle,messageCount:t.messageCount,showAddButton:t.showAddButton,onCloseMenu:n.handleCloseMenu,onOpenMenu:n.handleOpenMenu}}));t["default"]=y(o)},69:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=n(2),s=r(c),f=function(){return null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return function(t){var n,r;return r=n=(function(n){function r(t,n){o(this,r);var u=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n));return u.state=i({},e(i({},n,{props:t}))),u}return u(r,n),l(r,[{key:"componentWillReceiveProps",value:function(t,n){this.setState(i({},e(i({},n,{props:t}))))}},{key:"render",value:function(){return s["default"].createElement(t,i({},this.state,this.props))}}]),r})(s["default"].PureComponent),n.contextTypes={state:s["default"].PropTypes.object,handlers:s["default"].PropTypes.object,actions:s["default"].PropTypes.object},r}};t["default"]=d},70:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){var t=(0,s["default"])({"nav-list":!0,show:e.showMenu});return l["default"].createElement("section",{id:"sideBar",className:t,onClick:e.onClose},l["default"].createElement(v["default"],null),l["default"].createElement("ul",{className:"list-ul"},l["default"].createElement(_,{className:"icon-quanbu iconfont",to:"/list?tab=all"},"全部"),l["default"].createElement(_,{className:"icon-hao iconfont",to:"/list?tab=good"},"精华"),l["default"].createElement(_,{className:"icon-fenxiang iconfont",to:"/list?tab=share"},"分享"),l["default"].createElement(_,{className:"icon-wenda iconfont",to:"/list?tab=ask"},"问答"),l["default"].createElement(_,{className:"icon-zhaopin iconfont",to:"/list?tab=job"},"招聘"),l["default"].createElement(_,{className:"icon-xiaoxi iconfont line",to:"/message"},"消息"),l["default"].createElement(_,{className:"icon-about iconfont",to:"/about"},"关于")))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),l=r(i),c=n(68),s=r(c),f=n(58),d=n(69),p=r(d),h=n(71),v=r(h),m=(0,p["default"])((function(e){var t=e.state,n=e.handlers;return{showMenu:t.showMenu,onClose:n.handleCloseMenu}}));t["default"]=m(a);var y=(0,p["default"])((function(e){var t=e.state;return{current:t.location.raw}})),_=y((function(e){if(e.to===e.current){var t=(e.to,e.current,o(e,["to","current"]));return l["default"].createElement("li",t)}var n=(e.current,o(e,["current"]));return l["default"].createElement(f.Link,u({as:"li"},n))}))},71:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.location,n=e.userInfo,r=e.user,o=e.onLogout,l="/user/:loginname"===t.pattern&&n&&r&&n.loginname===r.loginname;return c["default"].createElement("div",{className:"user-info"},c["default"].createElement(i,{"if":!l&&n,info:n}),c["default"].createElement(a,{"if":!l&&!n,redirect:t.raw}),c["default"].createElement(u,{"if":l,onLogout:o}))}function a(e){return e["if"]?c["default"].createElement("ul",{className:"login-no"},c["default"].createElement(s.Link,{as:"li",className:"login",to:"/login?redirect="+e.redirect},"登录")):null}function u(e){return e["if"]?c["default"].createElement("ul",{className:"login-no"},c["default"].createElement("li",{className:"login",onClick:e.onLogout},"退出")):null}function i(e){if(!e["if"])return null;var t=e.info,n=t.loginname,r=t.avatar_url;return c["default"].createElement(s.Link,{as:"div",to:"/user/"+n,className:"login-yes"},c["default"].createElement("div",{className:"avertar"},r&&c["default"].createElement("img",{src:r})),c["default"].createElement("div",{className:"info"},n&&c["default"].createElement("p",null,n)))}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=r(l),s=n(58),f=n(69),d=r(f),p=(0,d["default"])((function(e){var t=e.state,n=e.handlers;return{location:t.location,userInfo:t.userInfo,user:t.user,onLogout:n.handleLogout}}));t["default"]=p(o)},72:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),l=n(2),c=r(l),s=(function(e){function t(){var e,n,r,u;o(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={shouldShow:!1},r.handleGoToTop=function(){window.scrollTo(0,0)},r.handleScroll=function(){var e=window,t=e.scrollY,n=r.state.shouldShow;t>100?n||r.setState({shouldShow:!0}):n&&r.setState({shouldShow:!1})},u=n,a(r,u)}return u(t,e),i(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return this.state.shouldShow?c["default"].createElement("div",{className:"iconfont icon-top",onClick:this.handleGoToTop},""):null}}]),t})(c["default"].Component);t["default"]=s},73:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.content?u["default"].createElement("div",{id:"wxAlert",className:"wx_loading"},u["default"].createElement("div",{id:"wx_alert_inner",className:"wx_alert_inner"},e.content)):null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=r(a),i=n(69),l=r(i),c=(0,l["default"])((function(e){var t=e.state;return{content:t.alertText}}));t["default"]=c(o)},74:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.content?u["default"].createElement("div",{id:"wxloading",className:"wx_loading"},u["default"].createElement("div",{className:"wx_loading_inner"},u["default"].createElement("i",{className:"wx_loading_icon"}),e.content)):null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=r(a),i=n(69),l=r(i),c=(0,l["default"])((function(e){var t=e.state;return{content:t.loadingText}}));t["default"]=c(o)},75:function(e,t,n){e.exports=function(e){n.e(2,(function(t){e(n(76))}))}},85:function(e,t,n){e.exports=function(e){n.e(3,(function(t){e(n(86))}))}},87:function(e,t,n){e.exports=function(e){n.e(4,(function(t){e(n(88))}))}},91:function(e,t,n){e.exports=function(e){n.e(5,(function(t){e(n(92))}))}},95:function(e,t,n){e.exports=function(e){n.e(6,(function(t){e(n(96))}))}},99:function(e,t,n){e.exports=function(e){n.e(7,(function(t){e(n(100))}))}},101:function(e,t,n){e.exports=function(e){n.e(1,(function(t){e(n(102))}))}}});
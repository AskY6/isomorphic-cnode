(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{371:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"initialState",function(){return s}),n.d(a,"COMPONENT_WILL_CREATE",function(){return i}),n.d(a,"CHANGE_TAB",function(){return l});var r=n(364);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={pageTitle:"\u6d88\u606f",tab:"hasNotRead",hasRead:[],hasNotRead:[]},i=function(e,t){var n=t.hasRead,a=t.hasNotRead,r=a.length>0?"hasNotRead":"hasRead";return o({},e=l(e,r),{hasRead:n,hasNotRead:a})},l=function(e,t){return o({},e,{tab:t})},u=n(1),f=n.n(u),m=n(48),p=n.n(m),d=n(23),h=n(363),b=n(365);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e){var t=e.state,n=e.handlers,a=t.tab,r=(t.hasRead,t.hasNotRead),o=p()({item:!0,br:!0,selected:"hasRead"===a}),c=p()({item:!0,br:!0,selected:"hasNotRead"===a});return f.a.createElement(h.a,null,f.a.createElement("div",{className:"page"},f.a.createElement("ul",{className:"tabs"},f.a.createElement("li",{className:o,"data-tab":"hasRead",onClick:n.handleTabChange},"\u5df2\u8bfb\u6d88\u606f"),f.a.createElement("li",{className:c,"data-tab":"hasNotRead",onClick:n.handleTabChange},"\u672a\u8bfb\u6d88\u606f",r.length>0&&f.a.createElement("i",{className:"iconfont read",onClick:n.handleMarkAll},"\ue60c"))),f.a.createElement(g,{list:t[a]})))}function g(e){var t=e.list;return t&&t.length?f.a.createElement("div",null,t.map(function(e){return f.a.createElement(N,y({},e,{key:e.id}))})):f.a.createElement(E,null)}function E(){return f.a.createElement("div",{className:"no-data"},f.a.createElement("i",{className:"iconfont icon-empty"},"\ue60a"),"\u6682\u65e0\u6570\u636e!")}function N(e){e.id,e.title;var t=e.author,n=e.type,a=e.reply,r=e.topic;return f.a.createElement("div",{className:"message markdown-body"},f.a.createElement("section",{className:"user"},f.a.createElement(d.Link,{as:"img",className:"head",src:t.avatar_url,to:"/user/".concat(t.loginname)}),f.a.createElement("div",{className:"info"},f.a.createElement("span",{className:"cl"},f.a.createElement("span",{className:"name"},t.loginname),"at"===n&&f.a.createElement("span",{className:"name"},"\u5728\u56de\u590d\u4e2d@\u4e86\u60a8"),"reply"===n&&f.a.createElement("span",{className:"name"},"\u56de\u590d\u4e86\u60a8\u7684\u8bdd\u9898")),f.a.createElement("span",{className:"cr"},f.a.createElement("span",{className:"name"},b.a(a.create_at,!0))))),f.a.createElement("div",{className:"reply_content",dangerouslySetInnerHTML:{__html:a.content}}),f.a.createElement(d.Link,{className:"topic-title",to:"/topic/".concat(r.id)},"\u8bdd\u9898\uff1a",r.title))}function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n,a,r,o,c){try{var s=e[o](c),i=s.value}catch(l){return void n(l)}s.done?t(i):Promise.resolve(i).then(a,r)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){O(o,a,r,c,s,"next",e)}function s(e){O(o,a,r,c,s,"throw",e)}c(void 0)})}}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return T});var T=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return r=this,o=(e=R(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==w(o)&&"function"!==typeof o?P(r):o,C(P(P(n)),"KeepAlive",!0),C(P(P(n)),"NeedLogin",!0),C(P(P(n)),"Model",a),C(P(P(n)),"View",v),C(P(P(n)),"handleTabChange",function(e){var t=e.currentTarget.getAttribute("data-tab");(0,n.store.actions.CHANGE_TAB)(t)}),C(P(P(n)),"handleMarkAll",k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/message/mark_all",t=n.cookie("accesstoken"),e.next=5,n.post("/message/mark_all",{accesstoken:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.showAlert(e.t0.message);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))),n}var n,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["a"]),n=t,(o=[{key:"componentWillCreate",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t,n,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cookie("accesstoken"),n="/messages?accesstoken=".concat(t),e.next=4,this.get(n);case 4:a=e.sent,r=a.data,(0,this.store.actions.COMPONENT_WILL_CREATE)({hasRead:r.has_read_messages,hasNotRead:r.hasnot_read_messages});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}])&&_(n.prototype,o),c&&_(n,c),t}()}}]);